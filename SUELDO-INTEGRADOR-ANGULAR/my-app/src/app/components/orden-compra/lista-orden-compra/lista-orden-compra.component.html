<div class="gradient-custom rounded-5 shadow-lg pb-5" style="min-height: 60vh">
  <div class="row d-flex flex-column justify-content-center align-items-center">
    <div class="col-sm-10">
      <h2 class="mt-4">Órdenes de Compra</h2>
      <div class="row justify-content-center mb-3 mt-4 align-items-center">
        <a
          type="button"
          class="btnAdd fw-bolder col-3 btn btn-success col-sm-12 col-md-3 shadow"
          routerLink="/ordenes-compra/form-ordenes-compra"
        >
          <fa-icon [icon]="faCreditCard" class="me-3"></fa-icon
          ><span>Generar Orden</span>
        </a>
      </div>
      <div class="row justify-content-end mb-3">
        <label
          class="col-md-2 col-sm-12 form-check-label"
          for="showActiveOnlyCheckbox"
          role="button"
        >
          Mostrar inactivas
          <input
            class="form-check-input border-black fw-bolder"
            type="checkbox"
            id="showActiveOnlyCheckbox"
            [(ngModel)]="mostrarOrdenesActivas"
            (change)="listarOrdenes()"
          />
        </label>
      </div>
      <div
        *ngIf="ordenesCompra.length > 0; else noOrdenes"
        class="table-responsive shadow-lg rounded-3"
      >
        <table class="table table-light table-hover align-middle m-0">
          <thead class="table-success">
            <tr>
              <th scope="col">#N° Orden</th>
              <th scope="col">Total Abonado</th>
              <th scope="col" class="d-none d-lg-table-cell">
                Información Recepción
              </th>
              <th scope="col" class="d-none d-lg-table-cell">Fecha Emisión</th>
              <th scope="col" class="d-none d-lg-table-cell">Fecha Entrega</th>
              <th scope="col">Estado</th>
              <th scope="col">Funcionalidades</th>
            </tr>
          </thead>
          <tbody class="table-group-divider">
            <tr
              class="align-middle fw-medium"
              *ngFor="let orden of ordenesCompra"
            >
              <td
                [ngClass]="
                  orden.activa
                    ? 'text-dark'
                    : 'text-secondary text-decoration-line-through'
                "
              >
                {{ orden.numeroOrden }}
              </td>
              <td
                [ngClass]="
                  orden.activa
                    ? 'text-dark'
                    : 'text-secondary text-decoration-line-through'
                "
              >
                {{ orden.total | currency : "USD" }}
              </td>
              <td
                class="d-none d-lg-table-cell"
                [ngClass]="
                  orden.activa
                    ? 'text-dark'
                    : 'text-secondary text-decoration-line-through'
                "
              >
                {{ orden.infoRecepcion }}
              </td>
              <td
                class="d-none d-lg-table-cell"
                [ngClass]="
                  orden.activa
                    ? 'text-dark'
                    : 'text-secondary text-decoration-line-through'
                "
              >
                {{ orden.fechaEmision | date : "dd/MM/yyyy" }}
              </td>
              <td
                class="d-none d-lg-table-cell"
                [ngClass]="
                  orden.activa
                    ? 'text-dark'
                    : 'text-secondary text-decoration-line-through'
                "
              >
                {{ orden.fechaEntrega | date : "dd/MM/yyyy" }}
              </td>
              <td
                [ngClass]="
                  orden.activa
                    ? 'text-dark'
                    : 'text-secondary text-decoration-line-through'
                "
              >
                {{
                  esFechaPosteriorHoy(orden.fechaEntrega)
                    ? "Entregado"
                    : orden.activa && !esFechaPosteriorHoy(orden.fechaEntrega)
                    ? "Pendiente"
                    : "Cancelada"
                }}
              </td>
              <td>
                <button
                  type="button"
                  class="btn me-3"
                  [ngClass]="
                    orden.activa ? 'btn-outline-danger' : 'btn-outline-primary'
                  "
                  (click)="cambiarEstadoOrden(orden, orden.activa)"
                  [title]="
                    orden.activa
                      ? 'Cancelar Orden - ' + orden.numeroOrden
                      : 'Activar Orden - ' + orden.numeroOrden
                  "
                >
                  <fa-icon
                    [icon]="orden.activa ? faBan : faChartLine"
                    class="fw-bolder fs-5"
                  ></fa-icon>
                </button>
                <button
                  type="button"
                  class="editBtn btn btn-outline-dark"
                  (click)="mostrarDetalle(orden.id!)"
                  [title]="'Mostrar Detalle - ' + orden.numeroOrden"
                >
                  <fa-icon
                    [icon]="faCircleInfo"
                    class="fw-bolder fs-5"
                  ></fa-icon>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
<ng-template #noOrdenes>
  <h2 *ngIf="mostrarOrdenesActivas; else noOrdenesMessage">
    No hay ordenes disponibles.
  </h2>
  <ng-template #noOrdenesMessage>
    <h2>No hay ordenes activas.</h2>
  </ng-template>
</ng-template>
